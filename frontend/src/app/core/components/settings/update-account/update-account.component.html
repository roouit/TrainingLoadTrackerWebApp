<mat-spinner
  class="settings-account-spinner"
  diameter="40"
  *ngIf="!loaded"
></mat-spinner>
<form *ngIf="loaded" class="form" [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="div-with-button">
    <mat-form-field appearance="legacy" floatLabel="always">
      <mat-label>Sähköposti</mat-label>
      <input
        matInput
        type="email"
        name="email"
        formControlName="email"
        required="false"
        (input)="handleChange($event)"
      />
      <mat-error *ngIf="form.invalid">{{ getErrorMessage("email") }}</mat-error>
    </mat-form-field>
    <button
      mat-raised-button
      class="btn-success save-btn"
      [class.spinner]="loading"
      type="submit"
      [disabled]="!(changed && form.valid)"
    >
      {{ loading ? "" : "Tallenna" }}
    </button>
  </div>
  <div class="messages">
    <div class="generic-message" *ngIf="genericMessage">
      {{ genericMessage }}
    </div>
    <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
  </div>
</form>
